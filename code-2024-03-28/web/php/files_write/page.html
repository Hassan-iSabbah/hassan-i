<!DOCTYPE html  PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN'  'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'><html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>Files_write</title>
</head><body><span style="color: #808080"><span style="font-size: 14pt"><span style="color: #ffffff"><span style="font-family: Consolas"><span style="background-color: #000000">&lt;</span></span></span></span></span><span style="font-size: 14pt"><span style="color: #ffffff"><span style="font-family: Consolas"><span style="background-color: #000000"><span style="color: #569cd6">form</span><span style="color: #9cdcfe">action</span>=<span style="color: #ce9178">&quot;upload.php&quot;</span><span style="color: #9cdcfe">method</span>=<span style="color: #ce9178">&quot;POST&quot;</span><span style="color: #9cdcfe">enctype</span>=<span style="color: #ce9178">&quot;multipart/form-data&quot;</span><span style="color: #808080">&gt;</span> <span style="color: #808080">&lt;</span><span style="color: #569cd6">input</span><span style="color: #9cdcfe">type</span>=<span style="color: #ce9178">&quot;file&quot;</span><span style="color: #9cdcfe">name</span>=<span style="color: #ce9178">&quot;document&quot;</span><span style="color: #808080">&gt;</span> <span style="color: #808080">&lt;</span><span style="color: #569cd6">button</span><span style="color: #9cdcfe">type</span>=<span style="color: #ce9178">&quot;submit&quot;</span><span style="color: #9cdcfe">name</span>=<span style="color: #ce9178">&quot;submit&quot;</span><span style="color: #808080">&gt;</span>Upload<span style="color: #808080">&lt;/</span><span style="color: #569cd6">button</span><span style="color: #808080">&gt;&lt;/</span><span style="color: #569cd6">form</span><span style="color: #808080">&gt;</span></span></span></span></span> <br/>
<br/>
<br/>
<br/>
<span style="color: #ffffff"><span style="background-color: #000000"><span style="font-family: Consolas"><span style="font-size: 14pt"><span style="color: #569cd6">&lt;?php</span> <span style="color: #c586c0">if</span>(<span style="color: #dcdcaa">isset</span>(<span style="color: #9cdcfe">$_POST</span>[<span style="color: #ce9178">'submit'</span>])){  <br/>
<span style="color: #9cdcfe">$file</span><span style="color: #d4d4d4">=</span><span style="color: #9cdcfe">$_FILES</span>[<span style="color: #ce9178">'document'</span>];  <br/>
<span style="color: #9cdcfe">$fileName</span><span style="color: #d4d4d4">=</span><span style="color: #9cdcfe">$_FILES</span>[<span style="color: #ce9178">'document'</span>][<span style="color: #ce9178">'name'</span>];  <br/>
<span style="color: #9cdcfe">$fileTmp</span><span style="color: #d4d4d4">=</span><span style="color: #9cdcfe">$_FILES</span>[<span style="color: #ce9178">'document'</span>][<span style="color: #ce9178">'tmp_name'</span>];  <br/>
<span style="color: #9cdcfe">$fileSizeInKB</span><span style="color: #d4d4d4">=</span><span style="color: #9cdcfe">$_FILES</span>[<span style="color: #ce9178">'document'</span>][<span style="color: #ce9178">'size'</span>] <span style="color: #d4d4d4">/</span><span style="color: #b5cea8">1024</span>;  <br/>
<span style="color: #9cdcfe">$fileError</span><span style="color: #d4d4d4">=</span><span style="color: #9cdcfe">$_FILES</span>[<span style="color: #ce9178">'document'</span>][<span style="color: #ce9178">'error'</span>];  <br/>
<span style="color: #9cdcfe">$fileType</span><span style="color: #d4d4d4">=</span><span style="color: #9cdcfe">$_FILES</span>[<span style="color: #ce9178">'document'</span>][<span style="color: #ce9178">'type'</span>];<br/>
  <span style="color: #9cdcfe">$fileExt</span><span style="color: #d4d4d4">=</span><span style="color: #dcdcaa">explode</span>(<span style="color: #ce9178">'.'</span>, <span style="color: #9cdcfe">$fileName</span>);  <br/>
<span style="color: #9cdcfe">$fileActualExt</span><span style="color: #d4d4d4">=</span><span style="color: #dcdcaa">strtolower</span>(<span style="color: #dcdcaa">end</span>(<span style="color: #9cdcfe">$fileExt</span>));<br/>
  <span style="color: #9cdcfe">$allowed</span><span style="color: #d4d4d4">=</span><span style="color: #dcdcaa">array</span>(<span style="color: #ce9178">'jpg'</span>,<span style="color: #ce9178">'jpeg'</span>,<span style="color: #ce9178">'png'</span>,<span style="color: #ce9178">'pdf'</span>);  <br/>
<span style="color: #9cdcfe">$maxSize</span><span style="color: #d4d4d4">=</span><span style="color: #b5cea8">102400</span>; <span style="color: #7ca668">//1000mb = 1 GB</span><br/>
<br/>
<br/>
<span style="color: #c586c0">if</span>(<span style="color: #dcdcaa">in_array</span>(<span style="color: #9cdcfe">$fileActualExt</span>, <span style="color: #9cdcfe">$allowed</span>)){   <br/>
<span style="color: #c586c0">if</span>(<span style="color: #9cdcfe">$fileError</span><span style="color: #d4d4d4">===</span><span style="color: #b5cea8">0</span>){    <br/>
<span style="color: #c586c0">if</span>(<span style="color: #9cdcfe">$fileSizeInKB</span><span style="color: #d4d4d4">&lt;</span><span style="color: #9cdcfe">$maxSize</span>){     <br/>
<span style="color: #9cdcfe">$fileNameNew</span><span style="color: #d4d4d4">=</span><span style="color: #dcdcaa">uniqid</span>(<span style="color: #ce9178">''</span>, <span style="color: #569cd6">true</span>)<span style="color: #d4d4d4">.</span><span style="color: #ce9178">&quot;.&quot;</span><span style="color: #d4d4d4">.</span><span style="color: #9cdcfe">$fileActualExt</span>;     <br/>
<span style="color: #9cdcfe">$fileDestination</span><span style="color: #d4d4d4">=</span><span style="color: #ce9178">&quot;uploads/&quot;</span><span style="color: #d4d4d4">.</span><span style="color: #9cdcfe">$fileNameNew</span>;     <br/>
<span style="color: #dcdcaa">move_uploaded_file</span>(<span style="color: #9cdcfe">$fileTmp</span>, <span style="color: #9cdcfe">$fileDestination</span>);     <br/>
<span style="color: #dcdcaa">header</span>(<span style="color: #ce9178">&quot;Location: docs.php?uploadsuccess&quot;</span>);    } <span style="color: #c586c0">else</span>{     <span style="color: #dcdcaa">echo</span><span style="color: #ce9178">&quot;Your file is too big.&quot;</span>;    }   } <span style="color: #c586c0">else</span>{    <span style="color: #dcdcaa">echo</span><span style="color: #ce9178">&quot;There was an error uploading your file. This is the maximum size: &quot;</span><span style="color: #d4d4d4">.</span><span style="color: #9cdcfe">$maxSize</span><span style="color: #d4d4d4">.</span><span style="color: #ce9178">&quot;kb&quot;</span>;   }  } <span style="color: #c586c0">else</span>{   <span style="color: #dcdcaa">echo</span><span style="color: #ce9178">&quot;You cannot upload files of this type!&quot;</span>;  } }<span style="color: #569cd6">?&gt;</span><br/>
</span></span></span></span> </body></html>